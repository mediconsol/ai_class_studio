import { PromptGuide } from '../../types';

export const promptGuide: PromptGuide = {
  strategy: {
    title: '간호기록 작성의 프롬프트 전략',
    description: '간호기록은 환자 안전과 직결되므로 할루시네이션을 최소화하는 것이 매우 중요합니다. 시스템/사용자 프롬프트를 분리하고, 낮은 temperature로 정확성을 우선시합니다.',
    keyPoints: [
      '시스템 프롬프트에서 "판단이나 진단 추가 금지", "간호사 관찰 내용만 정리" 등 의료 안전 규칙을 명확히 설정',
      '사용자 프롬프트에서 "원문에 있는 정보만 사용", "수치와 시간 정보는 절대 변경 금지" 등 구체적 제약 조건 명시',
      '낮은 temperature(0.1)로 설정하여 창의성보다 정확성을 우선',
      '간호 기록 문체("~합니다", "관찰됨")로 작성하도록 명시하여 일관성 확보',
    ],
    temperature: 0.1,
    temperatureReason: 'Temperature 0.1로 설정하여 환자 정보의 정확성을 최우선으로 합니다. 수치, 시간, 관찰 내용이 정확히 유지되어야 하므로 창의성보다 일관성을 우선합니다.',
  },

  comparison: {
    bad: {
      title: '❌ 나쁜 예: 프롬프트 미분리',
      systemPrompt: '',
      userPrompt: `간호 메모를 SOAP 형식으로 정리해줘.

[간호 메모]
김OO님 14:00 통증 심하다고 호소, 15:00 진통제 투여, 16:00 통증 감소`,
      output: `S: 환자가 14:00경 심한 통증을 호소하였음
O: 활력징후 안정적, 통증 스케일 8/10에서 3/10으로 감소
A: 진통제 투여 후 통증이 효과적으로 조절됨
P: 4시간마다 통증 재평가 예정, 필요시 추가 투여 고려`,
      issues: [
        '활력징후 정보가 원문에 없는데 "안정적"이라고 추가 (할루시네이션)',
        '통증 스케일 수치(8/10, 3/10)를 AI가 임의로 추정',
        '"효과적으로 조절됨"은 의학적 판단에 해당',
        '계획(P) 부분의 "4시간마다", "필요시 추가 투여"는 원문에 없는 내용',
      ],
    },
    good: {
      title: '✅ 좋은 예: 시스템/사용자 프롬프트 분리',
      systemPrompt: `당신은 간호기록 작성을 보조하는 역할입니다.

## 핵심 안전 규칙
- 원본 충실 원칙: 제공된 메모에 명시된 내용만 사용
- 의료 판단 금지: 진단, 평가, 치료 권고 절대 금지
- 정확성 우선: 수치, 시간, 관찰 내용은 절대 변경/추정 금지
- 간호 관찰만: 간호사가 직접 관찰한 내용만 기록`,
      userPrompt: `아래 간호 메모를 SOAP 형식의 간호기록 문장으로 정리해주세요.

조건:
- 판단이나 진단은 추가하지 말 것
- 간호사가 관찰한 내용만 정리
- 원문에 있는 정보만 사용
- 수치와 시간 정보는 절대 변경 금지

[간호 메모]
김OO님 14:00 통증 심하다고 호소, 15:00 진통제 투여, 16:00 통증 감소`,
      output: `S: 14:00 통증 심하다고 호소함
O: 15:00 진통제 투여함
A: 16:00 통증 감소 확인됨
P: 지속 관찰`,
    },
  },

  practice: {
    title: '직접 실습: 프롬프트 개선하기',
    instruction: '아래의 개선 전 프롬프트를 보고, 힌트를 참고하여 시스템/사용자 프롬프트로 분리하고 안전 규칙을 추가해보세요.',
    basePrompt: `활력징후 측정 내용을 간호기록으로 작성해줘.

BP 120/80, HR 72, RR 18, BT 36.5`,
    improvementHints: [
      '시스템 프롬프트: "수치 정확성", "의료 판단 금지" 규칙 추가',
      '사용자 프롬프트: "원문 수치 그대로 유지", "정상/비정상 판단 금지" 조건 명시',
      'Temperature를 0.1로 낮춰서 수치 변경 방지',
      '간호기록 문체("측정됨", "확인됨")로 작성하도록 요청',
    ],
  },

  checklist: [
    '✅ 시스템 프롬프트에 의료 안전 규칙(진단 금지, 원문 충실)을 명시했나요?',
    '✅ 사용자 프롬프트에 "원문만 사용", "수치 변경 금지" 제약 조건을 추가했나요?',
    '✅ Temperature를 0.1~0.2로 낮게 설정했나요?',
    '✅ 간호 기록 문체("~됨", "관찰됨")를 명시했나요?',
    '✅ 판단/평가/진단 표현이 포함되지 않았나요?',
    '✅ 시간, 수치, 관찰 내용이 원문과 정확히 일치하나요?',
  ],
};
