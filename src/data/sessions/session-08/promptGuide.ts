import { PromptGuide } from '../../types';

export const promptGuide: PromptGuide = {
  strategy: {
    title: '관찰기록 요약의 프롬프트 전략',
    description: '며칠간의 관찰 기록을 요약할 때, AI가 상태 변화를 "해석"하지 않고 "사실만 나열"하도록 유도하는 것이 핵심입니다. 추세 판단이나 예후 추정을 방지하고, 수치 변화를 정확히 유지합니다.',
    keyPoints: [
      '시스템 프롬프트에서 "진단 금지", "추세 해석 금지" 규칙을 명확히 설정',
      '사용자 프롬프트에서 요약 구조(초기→경과→현재)를 명시하여 일관성 확보',
      '낮은 temperature(0.1)로 수치 변경이나 추세 과장 방지',
      '"호전", "악화" 같은 평가 표현 대신 "증가", "감소" 등 객관적 표현 유도',
    ],
    temperature: 0.1,
    temperatureReason: 'Temperature 0.1로 설정하여 수치 추이의 정확성을 보장합니다. 며칠간의 활력징후, 증상 변화 등이 정확히 유지되고, "호전", "악화" 같은 주관적 해석이 추가되지 않도록 합니다.',
  },

  comparison: {
    bad: {
      title: '❌ 나쁜 예: 프롬프트 미분리',
      systemPrompt: '',
      userPrompt: `3일간의 관찰 기록을 요약해줘.

[관찰 기록]
1일차: 열 38.5도, 기침 심함
2일차: 열 37.8도, 기침 지속
3일차: 열 37.2도, 기침 감소`,
      output: `**초기 상태 (1일차)**
발열과 심한 기침 증상으로 호흡기 감염 의심

**경과 요약 (2-3일차)**
해열제와 항생제 투여 후 점진적으로 호전됨
체온이 정상 범위로 회복 중

**현재 상태 (3일차)**
증상이 거의 소실되었으며 안정적

**주의사항**
항생제 복용 완료 필요, 재발 가능성 관찰`,
      issues: [
        '"호흡기 감염 의심"은 의료 진단에 해당',
        '"해열제와 항생제 투여"는 원문에 없는 추측',
        '"호전됨", "정상 범위로 회복", "안정적"은 상태 평가 표현',
        '"항생제 복용 완료", "재발 가능성"은 치료 계획 추가',
      ],
    },
    good: {
      title: '✅ 좋은 예: 시스템/사용자 프롬프트 분리',
      systemPrompt: `당신은 간호 관찰기록 요약을 보조하는 역할입니다.

## 핵심 안전 규칙
- 사실 나열만: 관찰된 수치와 증상만 기술
- 해석 금지: "호전", "악화", "정상", "비정상" 등 평가 표현 금지
- 진단 금지: 질환명, 원인 추정 절대 금지
- 추측 금지: 투약 내역, 치료 계획 등 명시되지 않은 정보 추가 금지`,
      userPrompt: `아래 며칠간의 관찰 기록을 바탕으로 환자의 전반적인 상태 변화 흐름을 요약해주세요.

요약 구조:
1. 초기 상태 (측정값과 증상만)
2. 경과 요약 (수치 변화만)
3. 현재 상태 (최근 측정값과 증상만)
4. 주의 깊게 볼 점 (지속 관찰 필요 항목만)

조건:
- 진단이나 판단은 추가하지 말 것
- 간호 관찰 사실만 정리
- 원문에 있는 내용만 사용
- 수치 변화는 정확히 기재
- "호전", "악화" 같은 평가 표현 금지

[관찰 기록]
1일차: 열 38.5도, 기침 심함
2일차: 열 37.8도, 기침 지속
3일차: 열 37.2도, 기침 감소`,
      output: `**초기 상태 (1일차)**
열 38.5도, 기침 심함

**경과 요약 (2-3일차)**
열: 38.5도 → 37.8도 → 37.2도로 감소
기침: 심함 → 지속 → 감소

**현재 상태 (3일차)**
열 37.2도, 기침 감소 관찰됨

**주의 깊게 볼 점**
체온 추이 지속 관찰`,
    },
  },

  practice: {
    title: '직접 실습: 프롬프트 개선하기',
    instruction: '아래의 개선 전 프롬프트를 보고, 힌트를 참고하여 시스템/사용자 프롬프트로 분리하고 안전 규칙을 추가해보세요.',
    basePrompt: `5일간의 활력징후를 요약해줘.

Day1: BP 150/95, HR 88
Day2: BP 145/90, HR 82
Day3: BP 140/88, HR 78
Day4: BP 138/85, HR 76
Day5: BP 135/82, HR 74`,
    improvementHints: [
      '시스템 프롬프트: "추세 해석 금지", "수치만 기술", "평가 표현 금지" 규칙 추가',
      '사용자 프롬프트: "초기→경과→현재" 구조 명시, "수치 그대로 유지" 조건 추가',
      'Temperature를 0.1로 설정하여 수치 변경 방지',
      '"정상", "호전", "안정" 같은 평가 표현 사용 금지 명시',
    ],
  },

  checklist: [
    '✅ 시스템 프롬프트에 "해석 금지", "사실만 나열" 규칙을 명시했나요?',
    '✅ 사용자 프롬프트에 요약 구조(초기→경과→현재)를 명시했나요?',
    '✅ Temperature를 0.1~0.15로 낮게 설정했나요?',
    '✅ "호전", "악화", "안정적" 같은 평가 표현이 포함되지 않았나요?',
    '✅ 진단명이나 질환 추정이 포함되지 않았나요?',
    '✅ 수치 변화가 원문과 정확히 일치하나요?',
  ],
};
