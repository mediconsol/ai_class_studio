import { PromptGuide } from '../../types';

export const promptGuide: PromptGuide = {
  strategy: {
    title: '환자안전 보고서의 프롬프트 전략',
    description: '사고보고서는 법적·윤리적으로 민감한 문서이므로, AI가 원인을 추정하거나 책임을 암시하는 표현을 절대 사용하지 않도록 철저히 제약해야 합니다. 사실만 중립적으로 기술하도록 유도합니다.',
    keyPoints: [
      '시스템 프롬프트에서 "원인 추정 금지", "책임 표현 금지", "사실만 기술" 규칙을 최우선으로 설정',
      '사용자 프롬프트에서 피해야 할 표현(~때문에, ~미흡)을 명시적으로 나열',
      '극도로 낮은 temperature(0.05)로 창의적 해석이나 표현 변형 최소화',
      '중립적 용어 사용: "확인됨", "관찰됨", "발생함" 등 객관적 표현만 허용',
    ],
    temperature: 0.05,
    temperatureReason: 'Temperature 0.05로 설정하여 사고보고서의 객관성과 중립성을 최대한 보장합니다. 법적 문서로 활용될 수 있으므로, 원인 추정이나 책임 암시 표현이 절대 추가되지 않도록 합니다.',
  },

  comparison: {
    bad: {
      title: '❌ 나쁜 예: 프롬프트 미분리',
      systemPrompt: '',
      userPrompt: `낙상 사고를 보고서로 작성해줘.

[사고 메모]
14시 병실에서 환자가 침대에서 떨어짐. 보호자 자리 비움. 환자 의식 명료, 우측 팔 통증 호소. 15시 X-ray 확인.`,
      output: `**사고 개요**
환자가 침대에서 낙상하여 우측 팔 부상을 입은 사건

**사고 발생 상황**
14시경 환자가 보호자 부재 상황에서 침대 난간 미설치로 인해 낙상하였음.
낙상 위험 환자임에도 불구하고 보호자가 자리를 비운 것이 원인으로 보임.

**환자 상태**
다행히 의식은 명료하나 우측 팔에 심한 통증 호소

**조치 내용**
15시 X-ray 검사를 통해 골절 여부 확인
향후 재발 방지를 위해 침대 난간 설치 및 보호자 교육 필요`,
      issues: [
        '"침대 난간 미설치로 인해"는 원인을 추정하는 표현',
        '"보호자가 자리를 비운 것이 원인"은 책임 암시',
        '"다행히"는 감정적 표현',
        '"심한 통증"은 원문의 "통증 호소"를 과장',
        '"향후 재발 방지" 등 대책은 보고서 초안에 부적절',
      ],
    },
    good: {
      title: '✅ 좋은 예: 시스템/사용자 프롬프트 분리',
      systemPrompt: `당신은 환자안전 사고보고서 초안 작성을 보조하는 역할입니다.

## 핵심 안전 규칙 (최우선)
- 사실만 기술: 관찰된 사실만 중립적으로 기술
- 원인 추정 금지: "~때문에", "~로 인해" 등 인과관계 표현 절대 금지
- 책임 암시 금지: "~미흡", "~부족", "~실수", "~확인하지 못함" 등 표현 금지
- 감정 표현 금지: "다행히", "불행히도" 등 감정적 표현 금지
- 대책 제안 금지: 보고서는 사실만 기술, 대책은 별도 논의`,
      userPrompt: `아래 사고 상황 메모를 바탕으로 환자안전 보고서 초안을 작성해주세요.

■ 피해야 할 표현
- "~때문에", "~로 인해" (원인 추정)
- "~미흡", "~부족", "~실수" (책임 암시)
- "확인하지 못했다", "~했어야 했다" (과실 암시)
- "다행히", "불행히도" (감정 표현)

■ 보고서 구성
1. 사고 개요 (사실만)
2. 사고 발생 상황 (시간, 장소, 관찰 내용)
3. 사고 직후 환자 상태
4. 즉각 조치 내용

조건:
- 원문 메모에 있는 내용만 사용
- 시간, 장소, 수치는 정확히 유지
- 중립적 표현만 사용 ("확인됨", "관찰됨", "발생함")

[사고 상황 메모]
14시 병실에서 환자가 침대에서 떨어짐. 보호자 자리 비움. 환자 의식 명료, 우측 팔 통증 호소. 15시 X-ray 확인.`,
      output: `**사고 개요**
환자가 침대에서 낙상한 사건

**사고 발생 상황**
- 발생 시각: 14시
- 발생 장소: 병실
- 상황: 환자가 침대에서 떨어짐
- 당시 보호자는 자리에 없었음

**사고 직후 환자 상태**
- 의식: 명료
- 증상: 우측 팔 통증 호소

**즉각 조치 내용**
- 15시 X-ray 검사 시행`,
    },
  },

  practice: {
    title: '직접 실습: 프롬프트 개선하기',
    instruction: '아래의 개선 전 프롬프트를 보고, 힌트를 참고하여 시스템/사용자 프롬프트로 분리하고 안전 규칙을 추가해보세요.',
    basePrompt: `투약 오류 사고를 보고서로 작성해줘.

15시 간호사가 A환자에게 B환자 약을 잘못 투여함. 10분 후 발견하여 의사에게 보고, 관찰 지시받음. 환자 특이사항 없음.`,
    improvementHints: [
      '시스템 프롬프트: "원인 추정 금지", "책임 표현 금지", "사실만 기술" 최우선 규칙 설정',
      '사용자 프롬프트: 피해야 할 표현 명시 ("~미흡", "~실수", "~때문에")',
      'Temperature를 0.05로 극도로 낮게 설정하여 표현 변형 최소화',
      '중립 표현 사용: "투여됨", "확인됨", "보고됨" 등 수동형/객관형',
    ],
  },

  checklist: [
    '✅ 시스템 프롬프트에 "원인 추정 금지", "책임 표현 금지" 규칙을 명시했나요?',
    '✅ 사용자 프롬프트에 피해야 할 표현 목록을 구체적으로 나열했나요?',
    '✅ Temperature를 0.05~0.1로 극도로 낮게 설정했나요?',
    '✅ "~때문에", "~로 인해" 같은 인과관계 표현이 없나요?',
    '✅ "~미흡", "~부족" 같은 책임 암시 표현이 없나요?',
    '✅ "다행히", "불행히도" 같은 감정 표현이 없나요?',
  ],
};
