import { PromptGuide } from '../../types';

export const promptGuide: PromptGuide = {
  strategy: {
    title: '인수인계 요약의 프롬프트 전략',
    description: '인수인계는 다음 근무자의 즉각적인 행동을 돕는 것이 목적입니다. 모든 정보가 아닌 "행동 가능한 정보"만 선별하도록 프롬프트를 설계하고, 정보 누락이나 추측을 방지합니다.',
    keyPoints: [
      '시스템 프롬프트에서 "추측 금지", "원문 정보만" 규칙을 명확히 설정하여 안전성 확보',
      '사용자 프롬프트에서 출력 구조(현재 상태/주의사항/다음 할 일)를 명시하여 일관성 확보',
      '낮은 temperature(0.1)로 정보 누락이나 왜곡 방지',
      '"행동 가능한 정보"에 집중: 예정된 투약 시간, 관찰 필요 증상, 응급 대응 준비 사항',
    ],
    temperature: 0.1,
    temperatureReason: 'Temperature 0.1로 설정하여 인수인계 정보의 정확성을 보장합니다. 환자 상태, 투약 시간, 예정 처치 등 중요 정보가 누락되거나 변경되지 않도록 합니다.',
  },

  comparison: {
    bad: {
      title: '❌ 나쁜 예: 프롬프트 미분리',
      systemPrompt: '',
      userPrompt: `여러 환자 간호 메모를 인수인계용으로 요약해줘.

[간호 메모]
101호 김OO: BP 140/90, 오후 3시 통증 호소
102호 이OO: 수액 교체 필요, 보호자 면담 요청`,
      output: `**101호 김OO**
- 현재 상태: 혈압이 다소 높은 편이나 정상 범위 내
- 주의사항: 통증 관리 필요, 4시간마다 재평가
- 다음 할 일: 저녁 7시 진통제 투여 예정

**102호 이OO**
- 현재 상태: 안정적
- 주의사항: 수액 잔량 확인 필요
- 다음 할 일: 수액 교체 및 보호자 면담`,
      issues: [
        '혈압 해석("다소 높은 편이나 정상 범위")은 의료 판단에 해당',
        '"4시간마다 재평가", "저녁 7시 진통제"는 원문에 없는 추측 정보',
        '"안정적"이라는 상태 평가는 원문에 없음',
        '수액 관련 구체적 시간이나 종류가 없는데 "잔량 확인"으로 구체화',
      ],
    },
    good: {
      title: '✅ 좋은 예: 시스템/사용자 프롬프트 분리',
      systemPrompt: `당신은 간호 인수인계 자료 작성을 보조하는 역할입니다.

## 핵심 안전 규칙
- 원본 충실 원칙: 제공된 메모에 명시된 내용만 사용
- 추측 금지: 시간, 투약 계획 등 명시되지 않은 정보 추가 금지
- 판단 금지: 상태 평가, 우선순위 판단 등 의료적 해석 금지
- 행동 정보 우선: 다음 근무자가 즉시 수행할 사항 중심`,
      userPrompt: `아래 간호 메모를 다음 근무자가 바로 이해할 수 있도록 요약해주세요.

각 환자별로:
- 현재 상태: (측정값, 호소 내용만)
- 주의 사항: (관찰 필요 사항만)
- 다음 할 일: (명시된 예정 사항만)

조건:
- 원문에 있는 정보만 사용
- 수치와 시간은 정확히 유지
- 추측이나 해석 금지
- 상태 평가 표현 금지

[간호 메모]
101호 김OO: BP 140/90, 오후 3시 통증 호소
102호 이OO: 수액 교체 필요, 보호자 면담 요청`,
      output: `**101호 김OO**
- 현재 상태: BP 140/90, 오후 3시 통증 호소함
- 주의 사항: 통증 지속 관찰
- 다음 할 일: -

**102호 이OO**
- 현재 상태: -
- 주의 사항: -
- 다음 할 일: 수액 교체, 보호자 면담`,
    },
  },

  practice: {
    title: '직접 실습: 프롬프트 개선하기',
    instruction: '아래의 개선 전 프롬프트를 보고, 힌트를 참고하여 시스템/사용자 프롬프트로 분리하고 안전 규칙을 추가해보세요.',
    basePrompt: `5명 환자의 간호 메모를 인수인계용 표로 만들어줘.

201 박OO: V/S stable, 내일 퇴원 예정
202 최OO: 항생제 투여 중, 열 37.8도
203 정OO: 수술 후 1일차, 통증 조절 중
204 강OO: 낙상 위험, 보호자 동반
205 윤OO: 식사량 50%, 수분 섭취 권장`,
    improvementHints: [
      '시스템 프롬프트: "추측 금지", "상태 평가 금지", "원문만 사용" 규칙 추가',
      '사용자 프롬프트: 표 형식 명시, "V/S stable 같은 약어 그대로 유지" 조건 추가',
      'Temperature를 0.1로 설정하여 정보 누락 방지',
      '출력 항목 명확화: 환자/현재 상태/주의사항/다음 할 일',
    ],
  },

  checklist: [
    '✅ 시스템 프롬프트에 "추측 금지", "원문 충실" 규칙을 명시했나요?',
    '✅ 사용자 프롬프트에 출력 구조(현재 상태/주의사항/다음 할 일)를 명시했나요?',
    '✅ Temperature를 0.1~0.15로 낮게 설정했나요?',
    '✅ 상태 평가("안정적", "호전") 표현이 포함되지 않았나요?',
    '✅ 원문에 없는 시간, 투약 계획이 추가되지 않았나요?',
    '✅ 측정값과 시간 정보가 원문과 정확히 일치하나요?',
  ],
};
